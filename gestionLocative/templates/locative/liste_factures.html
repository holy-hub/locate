{% extends "base.html" %}

{% block content %}
<div class="container shadow bg-light rounded my-3 p-4">
    <h1 class="text-center mb-4">{{ title }}</h1>
    {% if total_impaye and total_impaye > 0 %}
    <div class="alert alert-warning mb-4">Total impayé : <strong>{{ total_impaye }} F</strong></div>
    {% endif %}
    <ul class="list-group list-group-flush">
        {% for facture in factures %}
        <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
            <div>
                <strong>#{{ facture.id }}</strong> — {{ facture.get_type_facture_display }}
                {% if facture.propriete %} — {{ facture.propriete.designation }}{% endif %}
                {% if facture.periode %} <span class="badge bg-light text-dark">{{ facture.periode }}</span>{% endif %}
                <br><small class="text-muted">{{ facture.date_facturation|date:"d/m/Y" }}{% if facture.date_echeance %} — Échéance {{ facture.date_echeance|date:"d/m/Y" }}{% endif %}</small>
            </div>
            <div>
                <strong>{{ facture.montantFacture }} F</strong>
                {% if facture.est_paye %}<span class="badge bg-success">Payé</span>{% else %}<span class="badge bg-danger">Impayé</span>{% endif %}
            </div>
        </li>
        {% empty %}
        <li class="list-group-item">Aucune facture.</li>
        {% endfor %}
    </ul>
</div>
{% endblock content %}